<!DOCTYPE html>
<html lang="en">
    <%- include('partials/head', {title: 'Editando:' + productToEdit.name}) %>
<body>
    <%- include('partials/headerCreate') %>
    <main id="main-productCreate">
        <section id="section-title-productCreate">
            <h2>ESTAS EDITANDO: <%= productToEdit.name %> </h2>
        </section>
        <section id="section-form-productCreate">
            <form action="/products/<%= productToEdit.id %>?_method=PUT" method="POST" enctype="multipart/form-data" class="form-productCreate">
                <div class="div-informationproduct">
                    <div id="div-name-productCreate">
                        <label>Nombre del producto:</label>
                        <input type="text" name="name" class="name" value="<%= productToEdit.name %>" id="name-newproduct" placeholder="Nombre del producto">
                        <% if (locals.errors && errors.name) {%>
                            <div class="text-danger"><i class="fas fa-exclamation-triangle"></i><%= errors.name.msg %></div>
                        <% } %>
                        <div class="nameErrorDiv errorDiv" style="color: rgb(255,0,0);" style="display:none;"></div>
                    </div>
                    <h4>Fotos *</h4>
                    <div id="div-photo-productCreate">
                        <label>Añadir una foto:</label>
                        <input type="file" name="image" class="image" class="input-photo-product">
                        <% if (locals.errors && errors.image) {%>
                            <div class="text-danger"><i class="fas fa-exclamation-triangle"></i><%= errors.image.msg %></div>
                        <% } %>
                        <div class="imageErrorDiv errorDiv" style="color: rgb(255,0,0);" style="display:none;"></div> 
                        <div class="imageErrorDiv2 errorDiv" style="color: rgb(255,0,0);" style="display:none;" ></div>
                    </div>
                    <h4>Información del Producto</h4>
                    <div id="div-description-productCreate">
                        <label>Descripcion:</label>
                        <textarea name="description" class="textarea-description description"><%= productToEdit.description %></textarea>
                        <% if (locals.errors && errors.description) {%>
                            <div class="text-danger"><i class="fas fa-exclamation-triangle"></i><%= errors.description.msg %></div>
                        <% } %>
                        <div class="descriptionErrorDiv errorDiv" style="color: rgb(255,0,0);" style="display:none;"></div>
                    </div>
                </div>
                <div class="div-features">
                    <div id="div-categories-productCreate">
                        <label>Seleccione Categoría:</label>
                        <% categories.forEach(category => { %>
                            <input type="radio" name="categoryId" class="category" value="<%= category.id %>"  class="input-categories" <%= productToEdit.categoryId == category.id ? 'checked' : ''%> ><%= category.name.toUpperCase() %><label></label>
                        <% }) %>
                        <% if (locals.errors && errors.categoryId) { %>
                            <div class="text-danger"><i class="fas fa-exclamation-triangle"></i><%= errors.categoryId.msg %></div>
                        <% } %>
                        <div class="categoryErrorDiv errorDiv" style="color: rgb(255,0,0);" style="display:none;"></div>
                    </div>
                    <div id="div-add-category-productCreate">
                        <label>Agregar Catergoria:(Opcional)</label>
                        <input type="text" name="newcategory" class="input-newcategory">
                    </div>
                    <!-- variantes -->
                    <h4 id="h4-variants">Variantes</h4>
                    <div id="div-variants-productCreate">
                        <div id="color-variant">
                            <label>Color:</label>
                            <select name="colorId" class="color">
                                <% colors.forEach(color => { %>
                                    <option value="<%= color.id %> " <%= productToEdit.colorId == color.id ? 'selected' : '' %>><%= color.name.toUpperCase() %> </option>
                                <% }) %>
                                
                            </select>
                            <% if (locals.errors && errors.colorId) { %>
                                <div class="text-danger"><i class="fas fa-exclamation-triangle"></i><%= errors.colorId.msg %></div>
                            <% } %>
                        </div>
                        <div id="size-variant">
                            <label>Tamaño:</label>
                            <select name="sizeId" class="price">
                                <% sizes.forEach(size => { %>
                                    <option value="<%= size.id %> " <%= productToEdit.sizeId == size.id ? 'selected' : ''%> ><%= size.name.toUpperCase() %> </option>
                                <% }) %>
                            </select>
                            <% if (locals.errors && errors.sizeId) { %>
                                <div class="text-danger"><i class="fas fa-exclamation-triangle"></i><%= errors.sizeId.msg %></div>
                            <% } %>
                        </div>
                    </div>
                </div>
                <div class="div-inventory">
                    <h4 id="h4-price">Inventario y Precio</h4>
                <div id="div-price-productCreate">
                    <div id="price-productCreate">
                        <label>Precio:</label>
                        <input type="text" name="price" class="price" value="<%= productToEdit.price %>" >
                        <% if (locals.errors && errors.price) { %>
                            <div class="text-danger"><i class="fas fa-exclamation-triangle"></i><%= errors.price.msg %></div>
                        <% } %>
                        <div class="priceErrorDiv errorDiv" style="color: rgb(255,0,0);" style="display:none;"></div>
                    </div>
                    <div id="price-productCreate">
                        <label>Descuento:</label>
                        <input type="text" name="discount" class="discount" value="<%= productToEdit.discount %>" >
                        <% if (locals.errors && errors.discount) { %>
                            <div class="text-danger"><i class="fas fa-exclamation-triangle"></i><%= errors.discount.msg %></div>
                        <% } %>
                        <div class="discountErrorDiv errorDiv" style="color: rgb(255,0,0);" style="display:none;"></div>
                    </div>
                    <div id="stock-productCreate">
                        <label>Stock:</label>
                        <input type="number" name="stock" class="stock" value="<%= productToEdit.stock %>">
                        <% if (locals.errors && errors.stock) { %>
                            <div class="text-danger"><i class="fas fa-exclamation-triangle"></i><%= errors.stock.msg %></div>
                        <% } %>
                        <div class="stockErrorDiv errorDiv" style="color: rgb(255,0,0);" style="display:none;"></div>
                    </div>
                </div>
                </div>
                <div class="div-buttons">
                    <div class="formErrorDiv errorDiv" style="color:red;" style="display:none;"></div>
                    <div id="buttons-productsCreate">
                        <button type="reset" class="design-button-productCreate">BORRAR</button>
                        <button type="submit" class="design-button-productCreate">CONFIRMAR</button>
                        <a href="/products" class="design-button-productCreate">CANCELAR</a>
                    </div>
                </div>
            </form>
        </section>
    </main>
    <%- include('partials/footerUsers') %>
</body>
<!-- Scripts -->
<script src="/js/productEditValidation.js"></script>
</html>